'use strict';var i=require('@microsoft/teams.common/http'),b=require('qs');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var i__namespace=/*#__PURE__*/_interopNamespace(i);var b__default=/*#__PURE__*/_interopDefault(b);function f(n,t,e){let r={};for(let s of t.query??[])r[s]=e[s];for(let s of t.path??[])n=n.replace(`{${s}}`,e[s]);return `${n}${b__default.default.stringify(r,{addQueryPrefix:true,arrayFormat:"comma"})}`}function m(n,t,e){let r=(n.header??[]).reduce((s,o)=>(t[o]&&(s[o]=t[o]),s),{});return Object.keys(r).length===0?e:{...e,headers:{...e?.headers,...r}}}var _="https://graph.microsoft.com",u=class{baseUrlRoot;http;betaHttp;constructor(t){this.baseUrlRoot=t?.baseUrlRoot??_,t?"request"in t?this.http=t.clone({baseUrl:`${this.baseUrlRoot}/v1.0`,headers:{"Content-Type":"application/json","User-Agent":"teams.ts[graph]/2.0.5"}}):this.http=new i__namespace.Client({...t,baseUrl:`${this.baseUrlRoot}/v1.0`,headers:{"Content-Type":"application/json","User-Agent":"teams.ts[graph]/2.0.5",...t.headers}}):this.http=new i__namespace.Client({baseUrl:`${this.baseUrlRoot}/v1.0`,headers:{"Content-Type":"application/json","User-Agent":"teams.ts[graph]/2.0.5"}});}async call(t,...e){let r=e[e.length-1],s=e.length>t.length&&r&&typeof r=="object"&&"requestConfig"in r,o=s?e.slice(0,-1):e,R=s?r:void 0,{ver:g="v1.0",method:a,path:C,paramDefs:p={},params:h={},body:y}=t(...o),c=f(C,p,h),l=m(p,h,R?.requestConfig),d=this.getHttpClient(g);switch(a){case "delete":case "get":return (await d[a](c,l)).data;case "patch":case "post":case "put":return (await d[a](c,y,l)).data;default:throw new Error(`Unsupported HTTP method: ${a}`)}}getHttpClient(t){return t==="v1.0"?this.http:(this.betaHttp=this.betaHttp??this.http.clone({baseUrl:`${this.baseUrlRoot}/beta`}),this.betaHttp)}};
exports.Client=u;//# sourceMappingURL=index.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy91cmwudHMiLCIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiZ2V0SW5qZWN0ZWRVcmwiLCJ1cmwiLCJwYXJhbXMiLCJkYXRhIiwicXVlcnkiLCJwYXJhbSIsInFzIiwiZ2V0SW5qZWN0ZWRSZXF1ZXN0Q29uZmlnIiwicmVxdWVzdENvbmZpZyIsInBhcmFtSGVhZGVycyIsImFnZyIsImRlZmF1bHRCYXNlVXJsUm9vdCIsIkNsaWVudCIsIm9wdGlvbnMiLCJpIiwiZnVuYyIsImFyZ3MiLCJsYXN0QXJnIiwiaGFzT3B0aW9ucyIsImZ1bmNBcmdzIiwiY2FsbE9wdGlvbnMiLCJ2ZXIiLCJtZXRob2QiLCJwYXRoIiwicGFyYW1EZWZzIiwiYm9keSIsImh0dHBDbGllbnQiLCJzY2hlbWFWZXJzaW9uIl0sIm1hcHBpbmdzIjoiaWlCQU1PLFNBQVNBLENBQ2RDLENBQUFBLENBQUFBLENBQ0FDLENBQ0FDLENBQUFBLENBQUFBLENBQ0EsQ0FDQSxJQUFNQyxDQUFBQSxDQUE2QixFQUVuQyxDQUFBLElBQUEsSUFBV0MsS0FBU0gsQ0FBTyxDQUFBLEtBQUEsRUFBUyxFQUFDLENBQ25DRSxFQUFNQyxDQUFLLENBQUEsQ0FBSUYsQ0FBS0UsQ0FBQUEsQ0FBSyxFQUczQixJQUFXQSxJQUFBQSxDQUFBQSxJQUFTSCxDQUFPLENBQUEsSUFBQSxFQUFRLEVBQ2pDRCxDQUFBQSxDQUFBQSxDQUFNQSxFQUFJLE9BQVEsQ0FBQSxDQUFBLENBQUEsRUFBSUksQ0FBSyxDQUFLRixDQUFBQSxDQUFBQSxDQUFBQSxDQUFBQSxDQUFLRSxDQUFLLENBQUMsRUFHN0MsT0FBTyxDQUFBLEVBQUdKLENBQUcsQ0FBQSxFQUFHSyxtQkFBRyxTQUFVRixDQUFBQSxDQUFBQSxDQUFPLENBQUUsY0FBQSxDQUFnQixLQUFNLFdBQWEsQ0FBQSxPQUFRLENBQUMsQ0FBQyxDQUFBLENBQ3JGLENBRU8sU0FBU0csQ0FBQUEsQ0FDZEwsQ0FDQUMsQ0FBQUEsQ0FBQUEsQ0FDQUssRUFD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QUssS0FBQSxDQUNILFFBQVEsTUFBTUksQ0FBQUEsQ0FBV0osQ0FBTSxDQUFBLENBQUVyQixFQUFLTyxDQUFhLENBQUEsRUFBRyxJQUN4RCxDQUFBLEtBQUssUUFDTCxLQUFLLE1BQUEsQ0FDTCxLQUFLLEtBQ0gsQ0FBQSxPQUFBLENBQVEsTUFBTWtCLENBQVdKLENBQUFBLENBQU0sQ0FBRXJCLENBQUFBLENBQUFBLENBQUt3QixFQUFNakIsQ0FBYSxDQUFBLEVBQUcsSUFDOUQsQ0FBQSxRQUNFLE1BQU0sSUFBSSxLQUFBLENBQU0sQ0FBNEJjLHlCQUFBQSxFQUFBQSxDQUFNLEVBQUUsQ0FDeEQsQ0FDRixDQUVRLGFBQWNLLENBQUFBLENBQUFBLENBQTJDLENBQy9ELE9BQUlBLENBQUFBLEdBQWtCLE1BQ2IsQ0FBQSxJQUFBLENBQUssTUFHZCxJQUFLLENBQUEsUUFBQSxDQUNILEtBQUssUUFDTCxFQUFBLElBQUEsQ0FBSyxLQUFLLEtBQU0sQ0FBQSxDQUNkLE9BQVMsQ0FBQSxDQUFBLEVBQUcsS0FBSyxXQUFXLENBQUEsS0FBQSxDQUM5QixDQUFDLENBRUksQ0FBQSxJQUFBLENBQUssU0FDZCxDQUNGIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHFzIGZyb20gJ3FzJztcblxuaW1wb3J0ICogYXMgaHR0cCBmcm9tICdAbWljcm9zb2Z0L3RlYW1zLmNvbW1vbi9odHRwJztcblxuaW1wb3J0IHsgUGFyYW1EZWZzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5qZWN0ZWRVcmwoXG4gIHVybDogc3RyaW5nLFxuICBwYXJhbXM6IFBhcmFtRGVmcyxcbiAgZGF0YTogUmVjb3JkPHN0cmluZywgYW55Pixcbikge1xuICBjb25zdCBxdWVyeTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgcGFyYW0gb2YgcGFyYW1zLnF1ZXJ5ID8/IFtdKSB7XG4gICAgcXVlcnlbcGFyYW1dID0gZGF0YVtwYXJhbV07XG4gIH1cblxuICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcy5wYXRoID8/IFtdKSB7XG4gICAgdXJsID0gdXJsLnJlcGxhY2UoYHske3BhcmFtfX1gLCBkYXRhW3BhcmFtXSk7XG4gIH1cblxuICByZXR1cm4gYCR7dXJsfSR7cXMuc3RyaW5naWZ5KHF1ZXJ5LCB7IGFkZFF1ZXJ5UHJlZml4OiB0cnVlLCBhcnJheUZvcm1hdDogJ2NvbW1hJyB9KX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5qZWN0ZWRSZXF1ZXN0Q29uZmlnKFxuICBwYXJhbXM6IFBhcmFtRGVmcyxcbiAgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PixcbiAgcmVxdWVzdENvbmZpZz86IGh0dHAuUmVxdWVzdENvbmZpZyxcbik6IGh0dHAuUmVxdWVzdENvbmZpZyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHBhcmFtSGVhZGVycyA9IChwYXJhbXMuaGVhZGVyID8/IFtdKS5yZWR1Y2U8UmVjb3JkPHN0cmluZywgYW55Pj4oXG4gICAgKGFnZywgcGFyYW0pID0+IHtcbiAgICAgIGlmIChkYXRhW3BhcmFtXSkge1xuICAgICAgICBhZ2dbcGFyYW1dID0gZGF0YVtwYXJhbV07XG4gICAgICB9XG4gICAgICByZXR1cm4gYWdnO1xuICAgIH0sXG4gICAge30sXG4gICk7XG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtSGVhZGVycykubGVuZ3RoID09PSAwXG4gICAgPyByZXF1ZXN0Q29uZmlnXG4gICAgOiB7XG4gICAgICAgIC4uLnJlcXVlc3RDb25maWcsXG4gICAgICAgIGhlYWRlcnM6IHsgLi4ucmVxdWVzdENvbmZpZz8uaGVhZGVycywgLi4ucGFyYW1IZWFkZXJzIH0sXG4gICAgICB9O1xufVxuIiwiaW1wb3J0ICogYXMgaHR0cCBmcm9tICdAbWljcm9zb2Z0L3RlYW1zLmNvbW1vbi9odHRwJztcblxuaW1wb3J0IHsgZ2V0SW5qZWN0ZWRVcmwsIGdldEluamVjdGVkUmVxdWVzdENvbmZpZyB9IGZyb20gJy4vdXRpbHMvdXJsJztcblxuaW1wb3J0IHR5cGUgeyBDYWxsT3B0aW9ucywgRW5kcG9pbnRSZXF1ZXN0LCBTY2hlbWFWZXJzaW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8vIEJ1aWxkLXRpbWUgY29uc3RhbnQgaW5qZWN0ZWQgYnkgdHN1cFxuZGVjbGFyZSBjb25zdCBfX1BBQ0tBR0VfVkVSU0lPTl9fOiBzdHJpbmc7XG5cbmV4cG9ydCB7IENhbGxPcHRpb25zLCBFbmRwb2ludFJlcXVlc3QsIFNjaGVtYVZlcnNpb24gfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgZGVmYXVsdEJhc2VVcmxSb290ID0gJ2h0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbSc7XG5cbnR5cGUgT3B0aW9ucyA9IChodHRwLkNsaWVudCB8IGh0dHAuQ2xpZW50T3B0aW9ucykgJiB7XG4gIC8qKiBHcmFwaCBzZXJ2aWNlIHJvb3QuIEJ5IGRlZmF1bHQsIHRoZSBnbG9iYWwgY29tbWVyY2lhbCBVUkwgXCJodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb21cIiBpcyB1c2VkLFxuICAgKiBidXQgY2VydGFpbiB0ZW5hbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMgdG8gZGlyZWN0IEdyYXBoIEFQSSBjYWxscyB0byBhIGRpZmZlcmVudCBjbG91ZCBpbnN0YW5jZS5cbiAgICovXG4gIGJhc2VVcmxSb290Pzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiAvXG4gKiBQcm92aWRlcyBhbiBlbnRyeSBwb2ludCBmb3IgaW52b2tpbmcgTWljcm9zb2Z0IEdyYXBoIEFQSXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnQge1xuICBwcm90ZWN0ZWQgYmFzZVVybFJvb3Q7XG4gIHByb3RlY3RlZCBodHRwOiBodHRwLkNsaWVudDtcbiAgcHJvdGVjdGVkIGJldGFIdHRwPzogaHR0cC5DbGllbnQ7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9wdGlvbnMpIHtcbiAgICB0aGlzLmJhc2VVcmxSb290ID0gb3B0aW9ucz8uYmFzZVVybFJvb3QgPz8gZGVmYXVsdEJhc2VVcmxSb290O1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgdGhpcy5odHRwID0gbmV3IGh0dHAuQ2xpZW50KHtcbiAgICAgICAgYmFzZVVybDogYCR7dGhpcy5iYXNlVXJsUm9vdH0vdjEuMGAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdVc2VyLUFnZW50JzogYHRlYW1zLnRzW2dyYXBoXS8ke19fUEFDS0FHRV9WRVJTSU9OX199YCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoJ3JlcXVlc3QnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuaHR0cCA9IG9wdGlvbnMuY2xvbmUoe1xuICAgICAgICBiYXNlVXJsOiBgJHt0aGlzLmJhc2VVcmxSb290fS92MS4wYCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiBgdGVhbXMudHNbZ3JhcGhdLyR7X19QQUNLQUdFX1ZFUlNJT05fX31gLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaHR0cCA9IG5ldyBodHRwLkNsaWVudCh7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGJhc2VVcmw6IGAke3RoaXMuYmFzZVVybFJvb3R9L3YxLjBgLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnVXNlci1BZ2VudCc6IGB0ZWFtcy50c1tncmFwaF0vJHtfX1BBQ0tBR0VfVkVSU0lPTl9ffWAsXG4gICAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGEgR3JhcGggQVBJIGVuZHBvaW50IGZ1bmN0aW9uIHdpdGggb3B0aW9uYWwgSFRUUCBjb25maWd1cmF0aW9uXG4gICAqXG4gICAqIEBwYXJhbSBmdW5jIC0gVGhlIGVuZHBvaW50IGZ1bmN0aW9uIHRvIGV4ZWN1dGVcbiAgICogQHBhcmFtIGFyZ3MgLSBBcmd1bWVudHMgZm9yIHRoZSBlbmRwb2ludCBmdW5jdGlvbiwgb3B0aW9uYWxseSBmb2xsb3dlZCBieSB7QGxpbmsgQ2FsbENvbmZpZ31cbiAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIGVuZHBvaW50J3MgcmVzcG9uc2UgZGF0YVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIC8vIFNpbXBsZSBjYWxsXG4gICAqIGNvbnN0IHVzZXIgPSBhd2FpdCBjbGllbnQuY2FsbChlbmRwb2ludHMudXNlcnMuZ2V0LCAndXNlci1pZCcpO1xuICAgKlxuICAgKiAvLyBXaXRoIEhUVFAgY29uZmlndXJhdGlvblxuICAgKiBjb25zdCB1c2VyID0gYXdhaXQgY2xpZW50LmNhbGwoZW5kcG9pbnRzLnVzZXJzLmdldCwgJ3VzZXItaWQnLCB7XG4gICAqICAgcmVxdWVzdENvbmZpZzoge1xuICAgKiAgICAgdGltZW91dDogNTAwMFxuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgYXN5bmMgY2FsbDxcbiAgICBGIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBFbmRwb2ludFJlcXVlc3Q8YW55PixcbiAgICBSID0gUmV0dXJuVHlwZTxGPiBleHRlbmRzIEVuZHBvaW50UmVxdWVzdDxpbmZlciBUPiA/IFQgOiBuZXZlcixcbiAgPihmdW5jOiBGLCAuLi5hcmdzOiBbLi4uUGFyYW1ldGVyczxGPiwgQ2FsbE9wdGlvbnM/XSk6IFByb21pc2U8Uj4ge1xuICAgIC8vIENoZWNrIGlmIGxhc3QgYXJnIGlzIGEgY29uZmlnIG9iamVjdFxuICAgIGNvbnN0IGxhc3RBcmcgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgaGFzT3B0aW9ucyA9XG4gICAgICBhcmdzLmxlbmd0aCA+IGZ1bmMubGVuZ3RoICYmXG4gICAgICBsYXN0QXJnICYmXG4gICAgICB0eXBlb2YgbGFzdEFyZyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICdyZXF1ZXN0Q29uZmlnJyBpbiBsYXN0QXJnO1xuXG4gICAgLy8gRXh0cmFjdCBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICBjb25zdCBmdW5jQXJncyA9IGhhc09wdGlvbnMgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG4gICAgY29uc3QgY2FsbE9wdGlvbnMgPSBoYXNPcHRpb25zID8gbGFzdEFyZyBhcyBDYWxsT3B0aW9ucyA6IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHtcbiAgICAgIHZlciA9ICd2MS4wJyxcbiAgICAgIG1ldGhvZCxcbiAgICAgIHBhdGgsXG4gICAgICBwYXJhbURlZnMgPSB7fSxcbiAgICAgIHBhcmFtcyA9IHt9LFxuICAgICAgYm9keSxcbiAgICB9ID0gZnVuYyguLi4oZnVuY0FyZ3MgYXMgYW55W10pKTtcbiAgICBjb25zdCB1cmwgPSBnZXRJbmplY3RlZFVybChwYXRoLCBwYXJhbURlZnMsIHBhcmFtcyk7XG4gICAgY29uc3QgcmVxdWVzdENvbmZpZyA9IGdldEluamVjdGVkUmVxdWVzdENvbmZpZyhwYXJhbURlZnMsIHBhcmFtcywgY2FsbE9wdGlvbnM/LnJlcXVlc3RDb25maWcpO1xuICAgIGNvbnN0IGh0dHBDbGllbnQgPSB0aGlzLmdldEh0dHBDbGllbnQodmVyKTtcblxuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgY2FzZSAnZ2V0JzpcbiAgICAgICAgcmV0dXJuIChhd2FpdCBodHRwQ2xpZW50W21ldGhvZF0odXJsLCByZXF1ZXN0Q29uZmlnKSkuZGF0YSBhcyBSO1xuICAgICAgY2FzZSAncGF0Y2gnOlxuICAgICAgY2FzZSAncG9zdCc6XG4gICAgICBjYXNlICdwdXQnOlxuICAgICAgICByZXR1cm4gKGF3YWl0IGh0dHBDbGllbnRbbWV0aG9kXSh1cmwsIGJvZHksIHJlcXVlc3RDb25maWcpKS5kYXRhIGFzIFI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIEhUVFAgbWV0aG9kOiAke21ldGhvZH1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEh0dHBDbGllbnQoc2NoZW1hVmVyc2lvbjogU2NoZW1hVmVyc2lvbik6IGh0dHAuQ2xpZW50IHtcbiAgICBpZiAoc2NoZW1hVmVyc2lvbiA9PT0gJ3YxLjAnKSB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwO1xuICAgIH1cblxuICAgIHRoaXMuYmV0YUh0dHAgPVxuICAgICAgdGhpcy5iZXRhSHR0cCA/P1xuICAgICAgdGhpcy5odHRwLmNsb25lKHtcbiAgICAgICAgYmFzZVVybDogYCR7dGhpcy5iYXNlVXJsUm9vdH0vYmV0YWAsXG4gICAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmJldGFIdHRwO1xuICB9XG59XG4iXX0=